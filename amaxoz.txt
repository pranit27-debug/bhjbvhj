<mxfile host="app.diagrams.net">
  <diagram name="Amazon SmartPay Flow" id="smartpay1">
    <mxGraphModel dx="1090" dy="737" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- AWS Server -->
        <mxCell id="2" value="AWS Server/Hosting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;" vertex="1" parent="1">
          <mxGeometry x="60" y="40" width="160" height="50" as="geometry"/>
        </mxCell>

        <!-- User Interface (Front-End) -->
        <mxCell id="3" value="User Interface (Front-End)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;" vertex="1" parent="1">
          <mxGeometry x="60" y="120" width="180" height="50" as="geometry"/>
        </mxCell>
        
        <!-- AWS to UI arrow -->
        <mxCell id="4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="2" target="3">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- SmartPay Engine (Back-End) -->
        <mxCell id="5" value="SmartPay Engine (Back-End Service)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="60" y="200" width="250" height="50" as="geometry"/>
        </mxCell>
        
        <!-- UI to Engine arrow -->
        <mxCell id="6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="3" target="5">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Offer & Payment Analysis Module -->
        <mxCell id="7" value="Offer & Payment Analysis Module" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="60" y="280" width="230" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Engine to Analysis arrow -->
        <mxCell id="8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="5" target="7">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Smart Suggestion Engine -->
        <mxCell id="9" value="Smart Suggestion Engine" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;" vertex="1" parent="1">
          <mxGeometry x="60" y="360" width="200" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Analysis to Suggestion arrow -->
        <mxCell id="10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="7" target="9">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- User Recommendation/Selection -->
        <mxCell id="11" value="User Recommendation / Selection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;" vertex="1" parent="1">
          <mxGeometry x="60" y="440" width="240" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Suggestion to Recommendation arrow -->
        <mxCell id="12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="9" target="11">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Payment Processing -->
        <mxCell id="13" value="Payment Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;" vertex="1" parent="1">
          <mxGeometry x="60" y="520" width="160" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Recommendation to Payment arrow -->
        <mxCell id="14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="11" target="13">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Success Decision (Diamond) -->
        <mxCell id="15" value="Payment Successful?" style="rhombus;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FFD966;" vertex="1" parent="1">
          <mxGeometry x="135" y="600" width="120" height="60" as="geometry"/>
        </mxCell>
        
        <!-- Payment to Success arrow -->
        <mxCell id="16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="13" target="15">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Success Path -->
        <mxCell id="17" value="Order Confirmation & Reward Summary" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;" vertex="1" parent="1">
          <mxGeometry x="350" y="600" width="230" height="50" as="geometry"/>
        </mxCell>
        
        <mxCell id="18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="15" target="17">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="270" y="630" as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Failure Path (Fallback Handler) -->
        <mxCell id="19" value="Smart Fallback Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;" vertex="1" parent="1">
          <mxGeometry x="100" y="700" width="180" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Decision to Fallback arrow -->
        <mxCell id="20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="15" target="19">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="195" y="660" as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Fallback loop back to recommendation -->
        <mxCell id="21" style="edgeStyle=elbowEdgeStyle;elbow=vertical;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="19" target="11">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="200" y="470" as="offset"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Post-Payment Dashboard -->
        <mxCell id="22" value="Post-Payment Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;" vertex="1" parent="1">
          <mxGeometry x="350" y="670" width="190" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Success to Post Dashboard -->
        <mxCell id="23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="17" target="22">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <!-- Payment Gateways (side) -->
        <mxCell id="24" value="Payment Gateways&#10;(Razorpay, UPI, Cards)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;" vertex="1" parent="1">
          <mxGeometry x="370" y="500" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- Engine to Gateways arrow -->
        <mxCell id="25" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="13" target="24">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Offers/Rewards DB (side) -->
        <mxCell id="26" value="Offers/Rewards DB, Bank APIs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="370" y="300" width="210" height="50" as="geometry"/>
        </mxCell>
        
        <!-- Analysis to Offers arrow -->
        <mxCell id="27" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="7" target="26">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- User Preferences/History (side) -->
        <mxCell id="28" value="User Preferences / History DB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;" vertex="1" parent="1">
          <mxGeometry x="370" y="380" width="200" height="50" as="geometry"/>
        </mxCell>

        <!-- Suggestion to User Pref arrow -->
        <mxCell id="29" style="edgeStyle=elbowEdgeStyle;elbow=horizontal;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" edge="1" parent="1" source="9" target="28">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>